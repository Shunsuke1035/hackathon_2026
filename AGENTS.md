# AGENTS.md

このリポジトリで作業するエージェント向けの運用ガイドです。

## 1. 目的
- 進捗・変更意図・実装範囲を明確にし、レビュー/引き継ぎコストを下げる。
- データ分析・可視化・API・UIの作業粒度を揃える。

## 2. 作業単位
- 基本は `Issue 1つ = 複数PR` で進める。
- PRは「動作確認できる最小単位」で分割する。
- 大きいデータ変更は、コード変更と分離できるなら別PRにする。

## 3. ブランチ運用
- ベース: `main`
- 命名規則:
  - `feat/issue-<番号>-<要約>`
  - `fix/<要約>`
  - `chore/<要約>`
- すでにマージ済みブランチは再利用せず、新規ブランチを切る。

## 4. PRルール
- タイトル形式:
  - `feat(scope): ...`
  - `fix(scope): ...`
  - `chore(scope): ...`
- 本文に最低限含める項目:
  - 変更概要
  - 変更ファイル/影響範囲
  - 検証手順と結果
  - 未対応事項（あれば）

## 5. 完了条件（Definition of Done）
- バックエンド:
  - `python -m compileall backend/app` が通る。
- フロントエンド:
  - `npx tsc --noEmit --incremental false` が通る。
- 画面/API:
  - 主要ユースケースが1回通る（ログイン/ダッシュボード表示/ヒートマップ取得）。
- ドキュメント:
  - 進捗は `docs/progress.md` に反映する。

## 6. データ運用ルール
- データはローカル前提。機微データはコミットしない。
- パスは相対パスのみ使用する。
- 列構成を変更したら、対応スクリプト/README/進捗メモを更新する。

## 7. 優先順位
- 1) データ整合性
- 2) API契約の安定性
- 3) UI表示の正しさ
- 4) 可視化チューニング

## 8. 連絡・記録
- 仕様判断やトレードオフはPR本文と `docs/progress.md` に残す。
- 「何を戻したか」「なぜ戻したか」も明記する。
